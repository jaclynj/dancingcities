var THREEx=THREEx||{};THREEx.FullScreen=THREEx.FullScreen||{};THREEx.FullScreen.available=function(){return this._hasWebkitFullScreen||this._hasMozFullScreen}THREEx.FullScreen.activated=function(){if(this._hasWebkitFullScreen){return document.webkitIsFullScreen}else if(this._hasMozFullScreen){return document.mozFullScreen}else{console.assert(false)}}THREEx.FullScreen.request=function(element){element=element||document.body;if(this._hasWebkitFullScreen){element.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}else if(this._hasMozFullScreen){element.mozRequestFullScreen()}else{console.assert(false)}}THREEx.FullScreen.cancel=function(){if(this._hasWebkitFullScreen){document.webkitCancelFullScreen()}else if(this._hasMozFullScreen){document.mozCancelFullScreen()}else{console.assert(false)}}THREEx.FullScreen._hasWebkitFullScreen='webkitCancelFullScreen'in document?true:false;THREEx.FullScreen._hasMozFullScreen='mozCancelFullScreen'in document?true:false;THREEx.FullScreen.bindKey=function(opts){opts=opts||{};var charCode=opts.charCode||'f'.charCodeAt(0);var dblclick=opts.dblclick!==undefined?opts.dblclick:false;var element=opts.element var toggle=function(){if(THREEx.FullScreen.activated()){THREEx.FullScreen.cancel()}else{THREEx.FullScreen.request(element)}}var onKeyPress=function(event){if(event.which!==charCode)return;toggle()}.bind(this);document.addEventListener('keypress',onKeyPress,false);dblclick&&document.addEventListener('dblclick',toggle,false);return{unbind:function(){document.removeEventListener('keypress',onKeyPress,false);dblclick&&document.removeEventListener('dblclick',toggle,false)}}}